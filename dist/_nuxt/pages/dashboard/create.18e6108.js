(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{229:function(e,t,r){var content=r(253);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(20).default)("7afd55b0",content,!0,{sourceMap:!1})},250:function(e,t,r){e.exports=r.p+"img/img-icon.be2d389.jpeg"},251:function(e,t,r){e.exports=r.p+"img/vid-icon.b888d03.png"},252:function(e,t,r){"use strict";var o=r(229);r.n(o).a},253:function(e,t,r){(t=r(19)(!1)).push([e.i,".custum-upload-manager{border:1px dashed grey}.showImg{width:100%;height:120px;background:#f9f9f9;position:relative;padding:10px;box-sizing:border-box}.showImg img{float:left;border:1px solid #ddd;border-radius:3px}.showImg .details{color:#c3c6d8;font-weight:700;width:70%;background:transparent;float:left;line-height:26px;margin-top:74px;margin-left:10px}.showImg .remove{position:absolute;right:5%;top:3%}.action-con{height:50px;line-height:50px;text-align:right;box-shadow:2px 2px 3px #ccc;margin:5px;padding:0 10px}.progress{height:4px;width:100%;background:#f7f6f6}.progress .progress-bar{transition:.3s;background:#21ba45;height:100%;width:0}",""]),e.exports=t},275:function(e,t,r){"use strict";r.r(t);r(16),r(15),r(8),r(127);var o={components:{},data:function(){return{editorConfig:{},newPost:{title:"",category:"",img:"",vid:""},loading:!1,serverErrors:null,src:"",filename:"",proImg:!1,proVid:!1}},methods:{processPost:function(){var e=this;this.newPost.title.length&&this.newPost.category.length?(this.loading=!0,this.$store.dispatch("postNewData",this.newPost).then((function(t){e.loading=!1,e.newPost.title="",e.newPost.description="",e.newPost.fileUp="",e.$toast.success({title:"Post Created",message:"post successfully created "}),e.$router.push({name:"dashboard"})})).catch((function(t){e.loading=!1,e.$Progress.fail(),e.serverErrors=Object.values(t.response.data.errors),e.serverError=t.response.data.error,e.$toast.error({title:"Server Error",message:"please make sure that each field are filled correctly"})}))):alert("All field are required")},processForm:function(e){var t=this;"thumb"===e.target.name?this.proImg=!0:this.proVid=!0;var r=e.target.files[0];this.newPost.fileUp=r;this.$store.dispatch("uploadFile",{file:r,field:e.target.name}).then((function(r){console.log("===================================="),console.log(r),console.log("===================================="),"thumb"===e.target.name?(t.newPost.img=r.data.url,t.$refs.img.src=r.data.url,t.proImg=!1):(t.proVid=!1,t.newPost.vid=r.data.url,t.$refs.vid.src=r.data.url)}))},RemoveFile:function(){this.src="",this.filename="",this.newPost.fileUp=""},backList:function(){this.$emit("backList")}},created:function(){var e=this;this.$nuxt.$on("save-evs-feed",(function(){e.processPost()}))},mounted:function(){this.$store.dispatch("getCategory")},computed:{progress:function(){return this.$store.getters.uploadProgress},categories:function(){return this.$store.getters.category}}},n=(r(252),r(21)),component=Object(n.a)(o,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"post-container"},[o("div",{staticClass:"ui elevate"},[o("form",{staticClass:"ui form",class:{loading:e.loading},attrs:{enctype:"multipart/formd-data"},on:{submit:function(t){return t.preventDefault(),e.processPost(t)}}},[e.serverErrors?o("div",e._l(e.serverErrors,(function(t,r){return o("div",{key:r,staticClass:"ui negative message"},[e._v(e._s(t[0]))])})),0):e._e(),e._v(" "),o("div",{staticClass:"field"},[o("label",[e._v("Title")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.newPost.title,expression:"newPost.title"}],attrs:{type:"text",name:"title",placeholder:"Post title",required:""},domProps:{value:e.newPost.title},on:{input:function(t){t.target.composing||e.$set(e.newPost,"title",t.target.value)}}}),e._v(" "),o("span",{staticClass:"error",staticStyle:{color:"#9f3a38"}})]),e._v(" "),o("div",{staticClass:"field ",staticStyle:{"margin-top":"10px"}},[o("label",[e._v("Category")]),e._v(" "),o("select",{directives:[{name:"model",rawName:"v-model",value:e.newPost.category,expression:"newPost.category"}],staticClass:"ui fluid dropdown",attrs:{required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.newPost,"category",t.target.multiple?r:r[0])}}},[o("option",{attrs:{value:""}},[e._v(" Select Category")]),e._v(" "),e._l(e.categories,(function(t,r){return o("option",{key:r,domProps:{value:t.name}},[e._v(e._s(t.name))])}))],2)]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.proImg,expression:"proImg"}],staticClass:"progress"},[o("div",{staticClass:"progress-bar progress-bar-striped progress-bar-animated bg-primary",style:{width:e.progress+"%"},attrs:{role:"progressbar","aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"}},[e._v(e._s(e.progress+"%"))])]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!e.src,expression:"!src"}],staticClass:"field custum-upload-manager"},[o("label",{attrs:{for:"display-pic"}},[o("div",{staticClass:"ui btn"},[o("img",{ref:"img",attrs:{src:r(250),width:"150px",height:"150px",alt:""}})])]),e._v(" "),o("input",{staticStyle:{display:"none"},attrs:{type:"file",name:"thumb",id:"display-pic"},on:{change:e.processForm}})]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.proVid,expression:"proVid"}],staticClass:"progress"},[o("div",{staticClass:"progress-bar progress-bar-striped progress-bar-animated bg-primary",style:{width:e.progress+"%"},attrs:{role:"progressbar","aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"}},[e._v(e._s(e.progress+"%"))])]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!e.src,expression:"!src"}],staticClass:"field custum-upload-manager"},[o("label",{attrs:{for:"video"}},[o("div",{staticClass:"ui btn"},[e.newPost.vid?e._e():o("img",{attrs:{src:r(251),width:"150px",height:"150px",alt:""}}),e._v(" "),o("video",{ref:"vid",attrs:{src:"",width:"150px"}})])]),e._v(" "),o("input",{staticStyle:{display:"none"},attrs:{type:"file",name:"video",id:"video"},on:{change:e.processForm}})]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.src,expression:"src"}],staticClass:"showImg"},[o("img",{attrs:{src:e.src,width:"100px",height:"100px"}}),e._v(" "),o("div",{staticClass:"details"},[e._v(e._s(e.filename))]),e._v(" "),o("div",{staticClass:"ui button inverted red remove",on:{click:e.RemoveFile}},[e._v("Remove")])])])])])}),[],!1,null,null,null);t.default=component.exports}}]);